var NIN=NIN||{};!function(e){"use strict";function t(){var e,t=0;e=setInterval(function(){$("#logo h1").css({backgroundPosition:-300*t+"px 0px"}),t++,5==t&&"safari"==m.career&&($("#switchSound").get(0).play(),$("#videos").removeClass("is-hidden")),15==t&&("pc"==m.type&&"safari"!=m.career&&($("#switchSound").get(0).play(),$("#videos").removeClass("is-hidden")),$("#logo h1 img").show()),t>=48&&(clearInterval(e),$("#videos").removeClass("is-hidden"))},30)}function i(){$(".hero-mask").addClass("is-done"),setTimeout(function(){v.isOkToStart=!0,n()},v.beginTimer)}function n(){v.isOkToStart&&v.hasOneLoaded&&(v.parentEl.addClass("is-visible"),o(),v.interval=setInterval(o,v.intervalTimer))}function o(){v.parentEl.attr("style","background-image: url("+l(v.slideOrder[v.currentSlide])+")"),v.currentSlide<v.maxSlide?v.currentSlide++:v.currentSlide=0,v.imgContainerEl.removeClass("is-visible"),v.imgEl.attr("style","background-image: url("+l(v.slideOrder[v.currentSlide])+")"),setTimeout(function(){v.imgContainerEl.addClass("is-visible")},500)}function r(e,t,i){function n(){if(r<=e.length){var t=new Image;t.setAttribute("src",e[r]),a[r]=e[r],t.onload=function(){o(!0)},t.onerror=function(){o(!1)}}}function o(o){r++,1===r&&"function"==typeof i?i(a):r===e.length&&"function"==typeof t?t(a):n()}var r=0,a=[];n()}function a(){v.hasOneLoaded=!0,n()}function s(){}function l(e){return"/switch/etRgxnAu0zRX4bmWnt9K628wG7YQUI6t/images/switch/home/hero/"+e+p+".jpg"}function c(e){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","/json/content/get/switchSettings",!0),t.onreadystatechange=function(){4==t.readyState&&"200"==t.status&&e(t.responseText)},t.send(null)}function d(e){return e.replace("http://","//")}function g(e){for(var t=e.length,i="",n=0;t>n;n++){var o=e[n].page_promotion.small_banner;i+='<li class="switch">									<a data-index="_B'+(n+1)+'" href="'+d(o.link_target.link_target_type.url)+'" title="'+e[n].title+'">										<img alt="'+e[n].title+'" src="'+d(o.media_type_image.image.image.url)+'">									</a>								</li>'}document.getElementById("featuredPromoList").innerHTML+=i,S.initialize()}function u(e){for(var t=e.length,i="",n=0;t>n;n++){var o=e[n],r=void 0!=o.title?o.title:"",a=void 0!=o.game.game_logo?o.game.game_logo.image.url:"";i+='<li>								<a href="/games/detail/'+o.id+'" title="'+r+'" class="coming-soon-link">								<img src="'+d(a)+'" alt="'+r+'">								</a>								</li>'}document.getElementById("more-games-list").innerHTML+=i}var m={MOBILE:"mobile",PC:"pc",TABLET:"tablet",IE:"ie",SAFARI:"safari",DS3:"ds3",NEWDS3:"newds3",WIIU:"wiiu",IPHONE:"iphone",IPAD:"ipad",ANDROID:"android",type:null,career:null,version:null},h=window.navigator.userAgent.toLowerCase();m.type=m.PC,m.career=m.CHROME,-1!=h.indexOf("3ds")?-1!=h.indexOf("iphone")?m.career=m.NEWDS3:(m.career=m.DS3,m.type=m.MOBILE):-1!=h.indexOf("wiiu")?m.career=m.WIIU:-1!=h.indexOf("msie")||-1!=h.indexOf("trident")?m.career=m.IE:-1!=h.indexOf("ipad")?(m.career=m.IPAD,m.type=m.TABLET):-1!=h.indexOf("iphone")||-1!=h.indexOf("ipod")&&-1==h.indexOf("3ds")?320==screen.width&&240==screen.height?(m.career=m.NEWDS3,m.type=m.MOBILE):(m.career=m.IPHONE,m.type=m.MOBILE,h.match(/iphone os (\w+){1,3}/g),m.version=(RegExp.$1.replace(/_/g,"")+"00").slice(0,3)):-1!=h.indexOf("safari")&&-1===h.indexOf("chrome")?m.career=m.SAFARI:-1!=h.indexOf("android")&&(m.career=m.ANDROID,m.type=-1!=h.indexOf("mobile")?m.MOBILE:m.TABLET),$(".split-photo").mouseover(function(e){var t=$(e.target).closest(".split-photo").width();e.pageX>=t/2?$(e.target).closest(".split-photo").removeClass("focus-left").addClass("focus-right"):$(e.target).closest(".split-photo").addClass("focus-left").removeClass("focus-right")}),$(".split-photo").mouseout(function(){$(".split-photo").removeClass("focus-left").removeClass("focus-right")}),window.setTimeout(function(){i()},1200),window.setTimeout(function(){t()},1700),e.tracking("switch","nintendo switch:home").pageView();var f=768,p=window.innerWidth<=f?"-mob":"",v={parentEl:$("#hero-slideshow"),imgContainerEl:$("#next-slideshow-image"),imgEl:$("#next-slideshow-image-scale"),isOkToStart:!1,hasOneLoaded:!1,beginTimer:1e3,intervalTimer:3300,interval:null,loadImages:["bg","1","2","3","4","5","6","7","9","10"],slideOrder:["bg","1","bg","2","bg","3","bg","4","bg","5","bg","6","bg","7","bg","9","bg","10"],currentSlide:0,maxSlide:0},w=[];v.maxSlide=v.slideOrder.length-1;for(var O=0;O<v.loadImages.length;O++)w.push(l(v.loadImages[O]));r(w,s,a);var b=$(window).width()<800?.95:.8,I=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:b,reverse:!0,duration:1}});if($(".waypoint-unseen").each(function(){var e="#"+$(this).attr("id");new ScrollMagic.Scene({triggerElement:e}).setClassToggle(e,"waypoint-unseen").addTo(I)}),$(".hero-section .btn-hero-arrow").click(function(e){e.preventDefault(),TweenLite.to(window,1,{scrollTo:{y:$(window).height()-10,autoKill:!1},ease:Power4.easeOut})}),$(".deep-video-link").each(function(){var e="#"+$(this).data("link");window.location.hash==e&&$(this).trigger("click")}),"en-us"===document.querySelector("html").getAttribute("lang")){var E={visiblePanels:3,slider:!0,visiblePanelsTablet:2.3,visiblePanelsMobile:1.3},S=e.carousel("#featuredPromos",E);c(function(e){var t=JSON.parse(e);g(t.list.switch_settings.FeaturedTiles),u(t.list.switch_settings.HotList.channel_hot_list.newest_games.game_ref),$("#featuredPromos").on("click",".panel a",function(e){var t=$(this).data("index"),i=$(this).attr("title");nclood.Metrics.trackLink({eVars:{13:i+t},events:[34]},e)}),$("#more-games-list").on("click","a",function(e){nclood.Metrics.trackLink({eVars:{39:"btn:"+$(this).attr("title")},events:[53]},e)})})}}(NIN);